"use strict";const ARR_OF_FORB_SITES=["music.youtube.com","www.youtube.com","www.linkedin.com","twitter.com","www.facebook.com","www.google.com","www.reddit.com","www.instagram.com","www.baidu.com","www.amazon.com","vk.com","www.pinterest.com","trello.com","calendar.google.com"];var IS_SUPERVISION_ACTIVE;let toggleThisWebSiteInp=document.getElementById("toggleThisWebSiteInp");toggleThisWebSiteInp.onchange=function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(e){let t=e[0].url,s=e[0].url.substring(t.lastIndexOf("//")+2,t.indexOf("/",8));IS_SUPERVISION_ACTIVE&&ARR_OF_FORB_SITES.includes(s)?(toggleThisWebSiteInp.checked=!1,showMessage(".message_forb"),_gaq.push(["_trackEvent","forb_site",s])):chrome.storage.sync.get("thisWebsiteWork",function(e){let t=e.thisWebsiteWork;toggleThisWebSiteInp.checked?(toggleEasyInpThisWebSite.checked&&(toggleEasyInpThisWebSite.checked=!1,document.getElementById("textOnOffEasyModeThisWEbsite").textContent="on",chrome.storage.sync.get("thisWebsiteWorkEasy",function(e){t=(t=e.thisWebsiteWorkEasy).filter(e=>e!==s),chrome.storage.sync.set({thisWebsiteWorkEasy:t})}),chrome.tabs.executeScript(null,{file:"removeHard.js"})),chrome.tabs.executeScript(null,{file:"removeHard.js"}),chrome.tabs.executeScript(null,{file:"watchDOM.js"}),t.push(s),chrome.storage.sync.set({thisWebsiteWork:t}),document.getElementById("textOnOffSite").textContent="off",_gaq.push(["_trackEvent","toggleThisWebSiteInp","on"])):(toggleThisPageInp.checked||chrome.tabs.executeScript(null,{file:"restore.js"}),t=t.filter(e=>e!==s),chrome.storage.sync.set({thisWebsiteWork:t}),document.getElementById("textOnOffSite").textContent="on",_gaq.push(["_trackEvent","toggleThisWebSiteInp","off"]))})})};let toggleEasyInpThisWebSite=document.getElementById("toggleEasyInpThisWebSite");toggleEasyInpThisWebSite.onchange=function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(e){let t=e[0].url,s=e[0].url.substring(t.lastIndexOf("//")+2,t.indexOf("/",8));IS_SUPERVISION_ACTIVE&&ARR_OF_FORB_SITES.includes(s)?(toggleEasyInpThisWebSite.checked=!1,showMessage(".message_forb"),_gaq.push(["_trackEvent","forb_site",s])):chrome.storage.sync.get("thisWebsiteWorkEasy",function(e){let t=e.thisWebsiteWorkEasy;toggleEasyInpThisWebSite.checked?(toggleThisWebSiteInp.checked&&(chrome.tabs.executeScript(null,{file:"restoreEasy.js"}),chrome.storage.sync.get("thisWebsiteWork",function(e){t=(t=e.thisWebsiteWork).filter(e=>e!==s),chrome.storage.sync.set({thisWebsiteWork:t})}),toggleThisWebSiteInp.checked=!1,document.getElementById("textOnOffSite").textContent="on"),chrome.tabs.executeScript(null,{file:"removeEasy.js"}),chrome.tabs.executeScript(null,{file:"watchDOMEasy.js"}),t.push(s),chrome.storage.sync.set({thisWebsiteWorkEasy:t}),document.getElementById("textOnOffEasyModeThisWEbsite").textContent="off",_gaq.push(["_trackEvent","toggleEasyInpThisWebSite","on"])):(toggleThisPageInp.checked||chrome.tabs.executeScript(null,{file:"restore.js"}),t=t.filter(e=>e!==s),chrome.storage.sync.set({thisWebsiteWorkEasy:t}),document.getElementById("textOnOffEasyModeThisWEbsite").textContent="on",_gaq.push(["_trackEvent","toggleEasyInpThisWebSite","off"]))})})};let toggleThisPageInp=document.getElementById("toggleThisPageInp");function initState(){chrome.storage.sync.get("tutorial",function(e){e.tutorial&&initTutorial()}),chrome.tabs.query({active:!0,currentWindow:!0},function(e){let t=!1,s=e[0].url,o=e[0].url.substring(s.lastIndexOf("//")+2,s.indexOf("/",8));chrome.storage.sync.get("supervision",function(e){e.supervision?(IS_SUPERVISION_ACTIVE=!0,ARR_OF_FORB_SITES.includes(o)&&document.querySelector(".PopUpOFF").classList.add("PopUpOFF-forb_site")):IS_SUPERVISION_ACTIVE=!1}),chrome.storage.sync.get("thisWebsiteWork",function(e){e.thisWebsiteWork.includes(o)&&(document.getElementById("toggleThisWebSiteInp").checked=!0,document.getElementById("textOnOffSite").textContent="off",t=!0)}),chrome.storage.sync.get("thisWebsiteWorkEasy",function(e){e.thisWebsiteWorkEasy.includes(o)&&!t&&(document.getElementById("toggleEasyInpThisWebSite").checked=!0,document.getElementById("textOnOffEasyModeThisWEbsite").textContent="off")}),chrome.tabs.sendMessage(e[0].id,{method:"getStatusThisPage"},function(e){e&&(document.getElementById("toggleThisPageInp").checked=!0)})})}function showMessage(e){document.querySelector(e).classList.add("message-visible"),".message_forb"==e?document.querySelector(".message_forb__link").onclick=function(){chrome.tabs.query({active:!0,currentWindow:!0},function(t){chrome.runtime.openOptionsPage(),document.querySelector(e).classList.remove("message-visible")}),_gaq.push(["_trackEvent","forbid_link","clicked"])}:document.querySelector(".message_reload__link").onclick=function(){chrome.tabs.query({active:!0,currentWindow:!0},function(t){chrome.tabs.update(t[0].id,{url:t[0].url}),document.querySelector(e).classList.remove("message-visible")})}}function initTutorial(){let e=document.querySelector(".tutorial"),t=document.querySelector(".tutorial__next");function s(){e.classList.add("tutorial-hid"),document.querySelector(".insturctions").textContent="Instructions",setTimeout(function(){e.classList.add("tutorial-non")},1e3),chrome.storage.sync.set({tutorial:!1})}document.querySelector(".insturctions").textContent="Tutorial",e.classList.remove("tutorial-non"),document.querySelector(".tutorial__agree").onclick=function(){return e.classList.add("tutorial-transp"),e.classList.add("tutorial-step_1"),!1},document.querySelector(".tutorial__skip").onclick=function(){return s(),_gaq.push(["_trackEvent","tutorial","skip"]),!1},document.querySelector(".tutorial_link-finish").onclick=function(){return s(),_gaq.push(["_trackEvent","tutorial","pass"]),!1},t.onclick=function(){return e.classList.add("tutorial-step_2"),t.onclick=function(){return e.classList.add("tutorial-step_3"),t.onclick=function(){return e.classList.add("tutorial-step_4"),t.onclick=function(){return e.classList.remove("tutorial-transp"),e.classList.add("tutorial-finish"),!1},!1},!1},!1},document.querySelector(".tutorial__contact").onclick=function(){return chrome.tabs.update({url:"mailto:romanisthere@gmail.com"}),_gaq.push(["_trackEvent","tutorial","contact"]),!1},_gaq.push(["_trackEvent","tutorial","init"])}toggleThisPageInp.onchange=function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(e){let t=e[0].url,s=e[0].url.substring(t.lastIndexOf("//")+2,t.indexOf("/",8));IS_SUPERVISION_ACTIVE&&ARR_OF_FORB_SITES.includes(s)?(toggleThisPageInp.checked=!1,showMessage(".message_forb"),_gaq.push(["_trackEvent","forb_site",s])):toggleThisPageInp.checked?(chrome.tabs.executeScript(null,{file:"removeAll.js"}),chrome.tabs.executeScript(null,{file:"watchDOM.js"}),chrome.tabs.sendMessage(e[0].id,{method:"setStatusThisPage",thisPageOn:!0}),_gaq.push(["_trackEvent","toggleThisPageInp","on"])):(toggleThisWebSiteInp.checked||chrome.tabs.executeScript(null,{file:"restoreEasy.js"}),toggleThisWebSiteInp.checked||toggleEasyInpThisWebSite.checked||chrome.tabs.executeScript(null,{file:"restore.js"}),showMessage(".message_reload"),chrome.tabs.sendMessage(e[0].id,{method:"setStatusThisPage",thisPageOn:!1}),_gaq.push(["_trackEvent","toggleThisPageInp","off"]))})},initState();var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-138501898-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ssl.google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),document.getElementsByClassName("insturctions")[0].addEventListener("click",function(){_gaq.push(["_trackEvent","instructions","clicked"])});
